"use strict";var initContainer=document.getElementById("initSlide"),yesForm=document.getElementById("yesForm"),noForm=document.getElementById("noform"),toYesForm=document.getElementById("yesFormTrans"),toNoForm=document.getElementById("noFormTrans"),creditSlide=document.getElementById("creditSlide"),sendSlide=document.getElementById("sendSlide"),toInitSlide=document.getElementById("toInitSlide"),toSendSlide=document.getElementById("toSendSlide"),toCreditSlide=document.getElementById("toCreditSlide"),toInitSlideFromNo=document.getElementById("toInitSlideFromNo"),toCreditSlideFromNo=document.getElementById("toCreditSlideFromNo"),typeSlide=document.getElementById("typeSlide"),uncertainCreditSlide=document.getElementById("uncertainCreditSlide"),toTypeSlide=document.getElementById("toTypeSlide"),toUncertainSendSlide=document.getElementById("toUncertainSendSlide"),uncertainSendSlide=document.getElementById("uncertainSendSlide"),toUncertainCreditSlide=document.getElementById("toUncertainCreditSlide");function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}toYesForm.addEventListener("click",function(){yesForm.classList.toggle("js-hidden--Animated"),initContainer.classList.toggle("js-hidden--Animated")}),toNoForm.addEventListener("click",function(){noForm.classList.toggle("js-hidden--Animated"),initContainer.classList.toggle("js-hidden--Animated")}),toInitSlide.addEventListener("click",function(){yesForm.classList.toggle("js-hidden--Animated"),initContainer.classList.toggle("js-hidden--Animated")}),toSendSlide.addEventListener("click",function(){sendSlide.classList.toggle("js-hidden--Animated"),creditSlide.classList.toggle("js-hidden--Animated")}),toCreditSlide.addEventListener("click",function(){sendSlide.classList.toggle("js-hidden--Animated"),creditSlide.classList.toggle("js-hidden--Animated")}),toInitSlideFromNo.addEventListener("click",function(){initContainer.classList.toggle("js-hidden--Animated"),noForm.classList.toggle("js-hidden--Animated")}),toCreditSlideFromNo.addEventListener("click",function(){typeSlide.classList.toggle("js-hidden--Animated"),uncertainCreditSlide.classList.toggle("js-hidden--Animated")}),toTypeSlide.addEventListener("click",function(){typeSlide.classList.toggle("js-hidden--Animated"),uncertainCreditSlide.classList.toggle("js-hidden--Animated")}),toUncertainSendSlide.addEventListener("click",function(){uncertainSendSlide.classList.toggle("js-hidden--Animated"),uncertainCreditSlide.classList.toggle("js-hidden--Animated")}),toUncertainCreditSlide.addEventListener("click",function(){uncertainSendSlide.classList.toggle("js-hidden--Animated"),uncertainCreditSlide.classList.toggle("js-hidden--Animated")}),$("#phone").inputmask(),$("#phoneUncertain").inputmask(),$(document).ready(function(){$("#sliderCredit").slider({range:"min",animate:!0,value:5e5,min:1e5,max:8e6,step:1e4,slide:function(e,t){t=numberWithCommas(t=t.value);$("#sliderCreditInput").val("Сумма кредита: "+t+" ₽")}}),$("#sliderInvest").slider({range:"min",animate:!0,value:0,min:0,max:64e5,step:1e4,slide:function(e,t){t=numberWithCommas(t=t.value);$("#sliderInvestInput").val("Первоначальный взнос: "+t+" ₽")}})});var creditInput=document.getElementById("sliderCreditInput"),valueCreditInput=creditInput.value;creditInput.addEventListener("focusin",function(){creditInput.value=""}),creditInput.addEventListener("focusout",function(){var e;creditInput.value?($("#sliderCredit").slider("option","value",creditInput.value),e=numberWithCommas(creditInput.value),creditInput.value="Сумма кредита: ".concat(e," ₽")):creditInput.value=valueCreditInput});var investInput=document.getElementById("sliderInvestInput"),valueInvestInput=investInput.value;investInput.addEventListener("focusin",function(){investInput.value=""}),investInput.addEventListener("focusout",function(){var e;investInput.value?($("#sliderInvest").slider("option","value",investInput.value),e=numberWithCommas(investInput.value),investInput.value="Первоначальный взнос: ".concat(e," ₽")):investInput.value=valueInvestInput});var pickerToggler=document.querySelector(".picker-display"),pickerOptions=document.querySelector(".picker-display__options");pickerToggler.addEventListener("click",function(){pickerOptions.classList.toggle("js-hidden--Animated")}),document.addEventListener("mouseup",function(e){pickerToggler.contains(e.target)||pickerOptions.classList.add("js-hidden--Animated")});var options=document.querySelectorAll(".option");function uncheckOptions(){options.forEach(function(e){e.classList.contains("checked")&&e.classList.remove("checked")})}function autoCheckOptions(t){uncheckOptions(),options.forEach(function(e){e.textContent.includes(t)&&e.classList.add("checked")})}options.forEach(function(e){e.addEventListener("click",function(){uncheckOptions(),e.classList.add("checked"),document.getElementById("pickerTime").textContent=e.textContent,document.getElementById("timePicker").value="Срок кредитования: ".concat(e.textContent)})});var timeInput=document.getElementById("timePicker"),valueTimeInput=timeInput.value;timeInput.addEventListener("focusin",function(){timeInput.value=""}),timeInput.addEventListener("focusout",function(){if(timeInput.value){$("#sliderInvest").slider("option","value",timeInput.value);var e=numberWithCommas(timeInput.value);switch(e){case"1":timeInput.value="Срок кредитования: ".concat(e," год"),document.getElementById("pickerTime").textContent="".concat(e," год"),autoCheckOptions(e);break;case"2":case"3":timeInput.value="Срок кредитования: ".concat(e," года"),document.getElementById("pickerTime").textContent="".concat(e," года"),autoCheckOptions(e);break;case"4":timeInput.value="Срок кредитования: ".concat(e," года"),document.getElementById("pickerTime").textContent=" ".concat(e," года"),autoCheckOptions(e);break;case"5":case"6":case"7":case"8":timeInput.value="Срок кредитования: ".concat(e," лет"),document.getElementById("pickerTime").textContent="".concat(e," лет"),autoCheckOptions(e)}}else timeInput.value=valueTimeInput});var radioLabels=document.querySelectorAll(".radio-label");radioLabels.forEach(function(t){t.addEventListener("click",function(){var e=(e=t.getAttribute("for")).replace("Type",""),e=document.getElementById(e);hideAllImages(),e.classList.toggle("js-hidden--Animated")})});var imagesToShow=document.querySelectorAll(".radio-image");function hideAllImages(){imagesToShow.forEach(function(e){e.classList.contains("js-hidden--Animated")||e.classList.add("js-hidden--Animated")})}$(document).ready(function(){$("#sliderCreditUncertain").slider({range:"min",animate:!0,value:5e5,min:1e5,max:8e6,step:1e4,slide:function(e,t){t=numberWithCommas(t=t.value);$("#sliderCreditInputUncertain").val("Желаемая cумма кредита: "+t+" ₽")}}),$("#sliderInvestUncertain").slider({range:"min",animate:!0,value:0,min:0,max:64e5,step:1e4,slide:function(e,t){t=numberWithCommas(t=t.value);$("#sliderInvestInputUncertain").val("Первоначальный взнос: "+t+" ₽")}})});var creditInputUncertain=document.getElementById("sliderCreditInputUncertain"),valueCreditInputUncertain=creditInput.value;creditInputUncertain.addEventListener("focusin",function(){creditInputUncertain.value=""}),creditInputUncertain.addEventListener("focusout",function(){var e;creditInputUncertain.value?($("#sliderCreditUncertain").slider("option","value",creditInputUncertain.value),e=numberWithCommas(creditInputUncertain.value),creditInputUncertain.value="Желаемая сумма кредита: ".concat(e," ₽")):creditInputUncertain.value=valueCreditInputUncertain});var investInputUncertain=document.getElementById("sliderInvestInputUncertain"),valueInvestInputUncertain=investInput.value;investInputUncertain.addEventListener("focusin",function(){investInputUncertain.value=""}),investInputUncertain.addEventListener("focusout",function(){var e;investInputUncertain.value?($("#sliderInvestUncertain").slider("option","value",investInputUncertain.value),e=numberWithCommas(investInputUncertain.value),investInputUncertain.value="Первоначальный взнос: ".concat(e," ₽")):investInputUncertain.value=valueInvestInputUncertain});var pickerTogglerUncertain=document.querySelector(".display--uncertain"),pickerOptionsUncertain=document.querySelector(".display__options--uncertain");pickerTogglerUncertain.addEventListener("click",function(){pickerOptionsUncertain.classList.toggle("js-hidden--Animated")}),document.addEventListener("mouseup",function(e){pickerTogglerUncertain.contains(e.target)||pickerOptionsUncertain.classList.add("js-hidden--Animated")});var optionsUncertain=document.querySelectorAll(".option--uncertain");optionsUncertain.forEach(function(e){e.addEventListener("click",function(){uncheckOptions(),e.classList.add("checked"),document.getElementById("pickerTimeUncertain").textContent=e.textContent,document.getElementById("timePickerUncertain").value="Срок кредитования: ".concat(e.textContent)})});var timeInputUncertain=document.getElementById("timePickerUncertain"),valueTimeInputUncertain=timeInput.value;timeInputUncertain.addEventListener("focusin",function(){timeInputUncertain.value=""}),timeInputUncertain.addEventListener("focusout",function(){if(timeInputUncertain.value){$("#sliderInvestUncertain").slider("option","value",timeInputUncertain.value);var e=numberWithCommas(timeInputUncertain.value);switch(e){case"1":timeInputUncertain.value="Срок кредитования: ".concat(e," год"),document.getElementById("pickerTimeUncertain").textContent="".concat(e," год"),autoCheckOptions(e);break;case"2":case"3":timeInputUncertain.value="Срок кредитования: ".concat(e," года"),document.getElementById("pickerTimeUncertain").textContent="".concat(e," года"),autoCheckOptions(e);break;case"4":timeInputUncertain.value="Срок кредитования: ".concat(e," года"),document.getElementById("pickerTimeUncertain").textContent=" ".concat(e," года"),autoCheckOptions(e);break;case"5":case"6":case"7":case"8":timeInputUncertain.value="Срок кредитования: ".concat(e," лет"),document.getElementById("pickerTimeUncertain").textContent="".concat(e," лет"),autoCheckOptions(e)}}else timeInputUncertain.value=valueTimeInputUncertain});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBvbmVudHMuanMiXSwibmFtZXMiOlsiaW5pdENvbnRhaW5lciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ5ZXNGb3JtIiwibm9Gb3JtIiwidG9ZZXNGb3JtIiwidG9Ob0Zvcm0iLCJjcmVkaXRTbGlkZSIsInNlbmRTbGlkZSIsInRvSW5pdFNsaWRlIiwidG9TZW5kU2xpZGUiLCJ0b0NyZWRpdFNsaWRlIiwidG9Jbml0U2xpZGVGcm9tTm8iLCJ0b0NyZWRpdFNsaWRlRnJvbU5vIiwidHlwZVNsaWRlIiwidW5jZXJ0YWluQ3JlZGl0U2xpZGUiLCJ0b1R5cGVTbGlkZSIsInRvVW5jZXJ0YWluU2VuZFNsaWRlIiwidW5jZXJ0YWluU2VuZFNsaWRlIiwidG9VbmNlcnRhaW5DcmVkaXRTbGlkZSIsIm51bWJlcldpdGhDb21tYXMiLCJ4IiwidG9TdHJpbmciLCJyZXBsYWNlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIiQiLCJpbnB1dG1hc2siLCJyZWFkeSIsInNsaWRlciIsInJhbmdlIiwiYW5pbWF0ZSIsInZhbHVlIiwibWluIiwibWF4Iiwic3RlcCIsInNsaWRlIiwiZXZlbnQiLCJ1aSIsImRlYnRWYWx1ZSIsInZhbCIsImNyZWRpdElucHV0IiwidmFsdWVDcmVkaXRJbnB1dCIsInVwZGF0ZWRDcmVkaXRJbnB1dCIsImNvbmNhdCIsImludmVzdElucHV0IiwidmFsdWVJbnZlc3RJbnB1dCIsInVwZGF0ZWRJbnZlc3RJbnB1dCIsInBpY2tlclRvZ2dsZXIiLCJxdWVyeVNlbGVjdG9yIiwicGlja2VyT3B0aW9ucyIsImUiLCJjb250YWlucyIsInRhcmdldCIsImFkZCIsIm9wdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwidW5jaGVja09wdGlvbnMiLCJmb3JFYWNoIiwib3B0aW9uIiwicmVtb3ZlIiwiYXV0b0NoZWNrT3B0aW9ucyIsImF0dGFjaGVkU3RyaW5nIiwidGV4dENvbnRlbnQiLCJpbmNsdWRlcyIsInRpbWVJbnB1dCIsInZhbHVlVGltZUlucHV0IiwidXBkYXRlZFRpbWVJbnB1dCIsInJhZGlvTGFiZWxzIiwibGFiZWwiLCJsYWJlbFZhbHVlIiwiZ2V0QXR0cmlidXRlIiwiaW1hZ2VUb1Nob3ciLCJoaWRlQWxsSW1hZ2VzIiwiaW1hZ2VzVG9TaG93IiwiaW1hZ2UiLCJjcmVkaXRJbnB1dFVuY2VydGFpbiIsInZhbHVlQ3JlZGl0SW5wdXRVbmNlcnRhaW4iLCJpbnZlc3RJbnB1dFVuY2VydGFpbiIsInZhbHVlSW52ZXN0SW5wdXRVbmNlcnRhaW4iLCJwaWNrZXJUb2dnbGVyVW5jZXJ0YWluIiwicGlja2VyT3B0aW9uc1VuY2VydGFpbiIsIm9wdGlvbnNVbmNlcnRhaW4iLCJ0aW1lSW5wdXRVbmNlcnRhaW4iLCJ2YWx1ZVRpbWVJbnB1dFVuY2VydGFpbiJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsY0FBQUMsU0FBQUMsZUFBQSxhQUNBQyxRQUFBRixTQUFBQyxlQUFBLFdBQ0FFLE9BQUFILFNBQUFDLGVBQUEsVUFDQUcsVUFBQUosU0FBQUMsZUFBQSxnQkFDQUksU0FBQUwsU0FBQUMsZUFBQSxlQUNBSyxZQUFBTixTQUFBQyxlQUFBLGVBQ0FNLFVBQUFQLFNBQUFDLGVBQUEsYUFDQU8sWUFBQVIsU0FBQUMsZUFBQSxlQUNBUSxZQUFBVCxTQUFBQyxlQUFBLGVBQ0FTLGNBQUFWLFNBQUFDLGVBQUEsaUJBQ0FVLGtCQUFBWCxTQUFBQyxlQUFBLHFCQUNBVyxvQkFBQVosU0FBQUMsZUFBQSx1QkFDQVksVUFBQWIsU0FBQUMsZUFBQSxhQUNBYSxxQkFBQWQsU0FBQUMsZUFBQSx3QkFDQWMsWUFBQWYsU0FBQUMsZUFBQSxlQUNBZSxxQkFBQWhCLFNBQUFDLGVBQUEsd0JBQ0FnQixtQkFBQWpCLFNBQUFDLGVBQUEsc0JBQ0FpQix1QkFBQWxCLFNBQUFDLGVBQUEsMEJBa0RBLFNBQUFrQixpQkFBQUMsR0FDQSxPQUFBQSxFQUFBQyxXQUFBQyxRQUFBLHdCQUFBLEtBakRBbEIsVUFBQW1CLGlCQUFBLFFBQUEsV0FD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QS9EQWdCLG1CQUFBbkQsTUFBQW9EIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGb3JtIExvZ2ljXG5sZXQgaW5pdENvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5pdFNsaWRlXCIpO1xubGV0IHllc0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInllc0Zvcm1cIik7XG5sZXQgbm9Gb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub2Zvcm1cIik7XG5sZXQgdG9ZZXNGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ5ZXNGb3JtVHJhbnNcIik7XG5sZXQgdG9Ob0Zvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5vRm9ybVRyYW5zXCIpO1xubGV0IGNyZWRpdFNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjcmVkaXRTbGlkZVwiKTtcbmxldCBzZW5kU2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNlbmRTbGlkZVwiKTtcbmxldCB0b0luaXRTbGlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9Jbml0U2xpZGVcIik7XG5sZXQgdG9TZW5kU2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvU2VuZFNsaWRlXCIpO1xubGV0IHRvQ3JlZGl0U2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvQ3JlZGl0U2xpZGVcIik7XG5sZXQgdG9Jbml0U2xpZGVGcm9tTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvSW5pdFNsaWRlRnJvbU5vXCIpO1xubGV0IHRvQ3JlZGl0U2xpZGVGcm9tTm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRvQ3JlZGl0U2xpZGVGcm9tTm9cIik7XG5sZXQgdHlwZVNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0eXBlU2xpZGVcIik7XG5sZXQgdW5jZXJ0YWluQ3JlZGl0U2xpZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInVuY2VydGFpbkNyZWRpdFNsaWRlXCIpO1xubGV0IHRvVHlwZVNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0b1R5cGVTbGlkZVwiKTtcbmxldCB0b1VuY2VydGFpblNlbmRTbGlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9VbmNlcnRhaW5TZW5kU2xpZGVcIik7XG5sZXQgdW5jZXJ0YWluU2VuZFNsaWRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ1bmNlcnRhaW5TZW5kU2xpZGVcIik7XG5sZXQgdG9VbmNlcnRhaW5DcmVkaXRTbGlkZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidG9VbmNlcnRhaW5DcmVkaXRTbGlkZVwiKTtcblxudG9ZZXNGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgeWVzRm9ybS5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbiAgICBpbml0Q29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xufSk7XG5cbnRvTm9Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgbm9Gb3JtLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgIGluaXRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcblxudG9Jbml0U2xpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB5ZXNGb3JtLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgIGluaXRDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcblxudG9TZW5kU2xpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzZW5kU2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG4gICAgY3JlZGl0U2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcbnRvQ3JlZGl0U2xpZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzZW5kU2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG4gICAgY3JlZGl0U2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcbnRvSW5pdFNsaWRlRnJvbU5vLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgaW5pdENvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbiAgICBub0Zvcm0uY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcbnRvQ3JlZGl0U2xpZGVGcm9tTm8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0eXBlU2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG4gICAgdW5jZXJ0YWluQ3JlZGl0U2xpZGUuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcbnRvVHlwZVNsaWRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgdHlwZVNsaWRlLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgIHVuY2VydGFpbkNyZWRpdFNsaWRlLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xufSk7XG50b1VuY2VydGFpblNlbmRTbGlkZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHVuY2VydGFpblNlbmRTbGlkZS5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbiAgICB1bmNlcnRhaW5DcmVkaXRTbGlkZS5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbn0pO1xudG9VbmNlcnRhaW5DcmVkaXRTbGlkZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHVuY2VydGFpblNlbmRTbGlkZS5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbiAgICB1bmNlcnRhaW5DcmVkaXRTbGlkZS5jbGFzc0xpc3QudG9nZ2xlKFwianMtaGlkZGVuLS1BbmltYXRlZFwiKTtcbn0pO1xuXG4kKFwiI3Bob25lXCIpLmlucHV0bWFzaygpO1xuJChcIiNwaG9uZVVuY2VydGFpblwiKS5pbnB1dG1hc2soKTtcblxuLy8gU2xpZGUgTG9naWNcbmZ1bmN0aW9uIG51bWJlcldpdGhDb21tYXMoeCkge1xuICAgIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIuXCIpO1xufVxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgJChcIiNzbGlkZXJDcmVkaXRcIikuc2xpZGVyKHtcbiAgICAgICAgcmFuZ2U6IFwibWluXCIsXG4gICAgICAgIGFuaW1hdGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiA1MDAwMDAsXG4gICAgICAgIG1pbjogMTAwMDAwLFxuICAgICAgICBtYXg6IDgwMDAwMDAsXG4gICAgICAgIHN0ZXA6IDEwMDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICAkKFwiI3NsaWRlckNyZWRpdElucHV0XCIpLnZhbChcItCh0YPQvNC80LAg0LrRgNC10LTQuNGC0LA6IFwiICsgZGVidFZhbHVlICsgXCIg4oK9XCIpO1xuICAgICAgICB9LFxuICAgIH0pO1xuICAgICQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDY0MDAwMDAsXG4gICAgICAgIHN0ZXA6IDEwMDAwLFxuICAgICAgICBzbGlkZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICBsZXQgZGVidFZhbHVlID0gdWkudmFsdWU7XG4gICAgICAgICAgICBkZWJ0VmFsdWUgPSBudW1iZXJXaXRoQ29tbWFzKGRlYnRWYWx1ZSk7XG4gICAgICAgICAgICAkKFwiI3NsaWRlckludmVzdElucHV0XCIpLnZhbChcItCf0LXRgNCy0L7QvdCw0YfQsNC70YzQvdGL0Lkg0LLQt9C90L7RgTogXCIgKyBkZWJ0VmFsdWUgKyBcIiDigr1cIik7XG4gICAgICAgIH0sXG4gICAgfSk7XG59KTtcblxubGV0IGNyZWRpdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJDcmVkaXRJbnB1dFwiKTtcbmxldCB2YWx1ZUNyZWRpdElucHV0ID0gY3JlZGl0SW5wdXQudmFsdWU7XG5jcmVkaXRJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKSA9PiB7XG4gICAgY3JlZGl0SW5wdXQudmFsdWUgPSBcIlwiO1xufSk7XG5cbmNyZWRpdElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB7XG4gICAgaWYgKCFjcmVkaXRJbnB1dC52YWx1ZSkge1xuICAgICAgICBjcmVkaXRJbnB1dC52YWx1ZSA9IHZhbHVlQ3JlZGl0SW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNzbGlkZXJDcmVkaXRcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIiwgY3JlZGl0SW5wdXQudmFsdWUpO1xuICAgICAgICBsZXQgdXBkYXRlZENyZWRpdElucHV0ID0gbnVtYmVyV2l0aENvbW1hcyhjcmVkaXRJbnB1dC52YWx1ZSk7XG4gICAgICAgIGNyZWRpdElucHV0LnZhbHVlID0gYNCh0YPQvNC80LAg0LrRgNC10LTQuNGC0LA6ICR7dXBkYXRlZENyZWRpdElucHV0fSDigr1gO1xuICAgIH1cbn0pO1xubGV0IGludmVzdElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzbGlkZXJJbnZlc3RJbnB1dFwiKTtcbmxldCB2YWx1ZUludmVzdElucHV0ID0gaW52ZXN0SW5wdXQudmFsdWU7XG5pbnZlc3RJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNpblwiLCAoKSA9PiB7XG4gICAgaW52ZXN0SW5wdXQudmFsdWUgPSBcIlwiO1xufSk7XG5cbmludmVzdElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB7XG4gICAgaWYgKCFpbnZlc3RJbnB1dC52YWx1ZSkge1xuICAgICAgICBpbnZlc3RJbnB1dC52YWx1ZSA9IHZhbHVlSW52ZXN0SW5wdXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJChcIiNzbGlkZXJJbnZlc3RcIikuc2xpZGVyKFwib3B0aW9uXCIsIFwidmFsdWVcIiwgaW52ZXN0SW5wdXQudmFsdWUpO1xuICAgICAgICBsZXQgdXBkYXRlZEludmVzdElucHV0ID0gbnVtYmVyV2l0aENvbW1hcyhpbnZlc3RJbnB1dC52YWx1ZSk7XG4gICAgICAgIGludmVzdElucHV0LnZhbHVlID0gYNCf0LXRgNCy0L7QvdCw0YfQsNC70YzQvdGL0Lkg0LLQt9C90L7RgTogJHt1cGRhdGVkSW52ZXN0SW5wdXR9IOKCvWA7XG4gICAgfVxufSk7XG5cbmxldCBwaWNrZXJUb2dnbGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waWNrZXItZGlzcGxheVwiKTtcbmxldCBwaWNrZXJPcHRpb25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waWNrZXItZGlzcGxheV9fb3B0aW9uc1wiKTtcbnBpY2tlclRvZ2dsZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwaWNrZXJPcHRpb25zLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xufSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmdW5jdGlvbihlKSB7XG4gICAgaWYgKCFwaWNrZXJUb2dnbGVyLmNvbnRhaW5zKGUudGFyZ2V0KSkge1xuICAgICAgICBwaWNrZXJPcHRpb25zLmNsYXNzTGlzdC5hZGQoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgIH1cbn0pO1xuXG5sZXQgb3B0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3B0aW9uXCIpO1xub3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdW5jaGVja09wdGlvbnMoKTtcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoXCJjaGVja2VkXCIpO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpY2tlclRpbWVcIikudGV4dENvbnRlbnQgPSBvcHRpb24udGV4dENvbnRlbnQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgXCJ0aW1lUGlja2VyXCJcbiAgICAgICAgKS52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7b3B0aW9uLnRleHRDb250ZW50fWA7XG4gICAgfSk7XG59KTtcblxuZnVuY3Rpb24gdW5jaGVja09wdGlvbnMoKSB7XG4gICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJjaGVja2VkXCIpKSB7XG4gICAgICAgICAgICBvcHRpb24uY2xhc3NMaXN0LnJlbW92ZShcImNoZWNrZWRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYXV0b0NoZWNrT3B0aW9ucyhhdHRhY2hlZFN0cmluZykge1xuICAgIHVuY2hlY2tPcHRpb25zKCk7XG4gICAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICAgICAgaWYgKG9wdGlvbi50ZXh0Q29udGVudC5pbmNsdWRlcyhhdHRhY2hlZFN0cmluZykpIHtcbiAgICAgICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5sZXQgdGltZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lUGlja2VyXCIpO1xubGV0IHZhbHVlVGltZUlucHV0ID0gdGltZUlucHV0LnZhbHVlO1xudGltZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcbiAgICB0aW1lSW5wdXQudmFsdWUgPSBcIlwiO1xufSk7XG5cbnRpbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgKCkgPT4ge1xuICAgIGlmICghdGltZUlucHV0LnZhbHVlKSB7XG4gICAgICAgIHRpbWVJbnB1dC52YWx1ZSA9IHZhbHVlVGltZUlucHV0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjc2xpZGVySW52ZXN0XCIpLnNsaWRlcihcIm9wdGlvblwiLCBcInZhbHVlXCIsIHRpbWVJbnB1dC52YWx1ZSk7XG4gICAgICAgIGxldCB1cGRhdGVkVGltZUlucHV0ID0gbnVtYmVyV2l0aENvbW1hcyh0aW1lSW5wdXQudmFsdWUpO1xuICAgICAgICBzd2l0Y2ggKHVwZGF0ZWRUaW1lSW5wdXQpIHtcbiAgICAgICAgICAgIGNhc2UgXCIxXCI6XG4gICAgICAgICAgICAgICAgdGltZUlucHV0LnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHt1cGRhdGVkVGltZUlucHV0fSDQs9C+0LRgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICBcInBpY2tlclRpbWVcIlxuICAgICAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgJHt1cGRhdGVkVGltZUlucHV0fSDQs9C+0LRgO1xuICAgICAgICAgICAgICAgIGF1dG9DaGVja09wdGlvbnModXBkYXRlZFRpbWVJbnB1dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiMlwiOlxuICAgICAgICAgICAgICAgIHRpbWVJbnB1dC52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7dXBkYXRlZFRpbWVJbnB1dH0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICBcInBpY2tlclRpbWVcIlxuICAgICAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgJHt1cGRhdGVkVGltZUlucHV0fSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrT3B0aW9ucyh1cGRhdGVkVGltZUlucHV0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIzXCI6XG4gICAgICAgICAgICAgICAgdGltZUlucHV0LnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHt1cGRhdGVkVGltZUlucHV0fSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtNCwYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjRcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXQudmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtNCwYDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgICAgICAgICAgXCJwaWNrZXJUaW1lXCJcbiAgICAgICAgICAgICAgICApLnRleHRDb250ZW50ID0gYCAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtNCwYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjVcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXQudmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrT3B0aW9ucyh1cGRhdGVkVGltZUlucHV0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCI2XCI6XG4gICAgICAgICAgICAgICAgdGltZUlucHV0LnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHt1cGRhdGVkVGltZUlucHV0fSDQu9C10YJgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICBcInBpY2tlclRpbWVcIlxuICAgICAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgJHt1cGRhdGVkVGltZUlucHV0fSDQu9C10YJgO1xuICAgICAgICAgICAgICAgIGF1dG9DaGVja09wdGlvbnModXBkYXRlZFRpbWVJbnB1dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiN1wiOlxuICAgICAgICAgICAgICAgIHRpbWVJbnB1dC52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgICAgICAgICAgXCJwaWNrZXJUaW1lXCJcbiAgICAgICAgICAgICAgICApLnRleHRDb250ZW50ID0gYCR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjhcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXQudmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrT3B0aW9ucyh1cGRhdGVkVGltZUlucHV0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5sZXQgcmFkaW9MYWJlbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJhZGlvLWxhYmVsXCIpO1xucmFkaW9MYWJlbHMuZm9yRWFjaCgobGFiZWwpID0+IHtcbiAgICBsYWJlbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBsZXQgbGFiZWxWYWx1ZSA9IGxhYmVsLmdldEF0dHJpYnV0ZShcImZvclwiKTtcbiAgICAgICAgbGFiZWxWYWx1ZSA9IGxhYmVsVmFsdWUucmVwbGFjZShcIlR5cGVcIiwgXCJcIik7XG4gICAgICAgIGxldCBpbWFnZVRvU2hvdyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxhYmVsVmFsdWUpO1xuICAgICAgICBoaWRlQWxsSW1hZ2VzKCk7XG4gICAgICAgIGltYWdlVG9TaG93LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgIH0pO1xufSk7XG5cbmxldCBpbWFnZXNUb1Nob3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJhZGlvLWltYWdlXCIpO1xuXG5mdW5jdGlvbiBoaWRlQWxsSW1hZ2VzKCkge1xuICAgIGltYWdlc1RvU2hvdy5mb3JFYWNoKChpbWFnZSkgPT4ge1xuICAgICAgICBpZiAoIWltYWdlLmNsYXNzTGlzdC5jb250YWlucyhcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIikpIHtcbiAgICAgICAgICAgIGltYWdlLmNsYXNzTGlzdC5hZGQoXCJqcy1oaWRkZW4tLUFuaW1hdGVkXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICQoXCIjc2xpZGVyQ3JlZGl0VW5jZXJ0YWluXCIpLnNsaWRlcih7XG4gICAgICAgIHJhbmdlOiBcIm1pblwiLFxuICAgICAgICBhbmltYXRlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogNTAwMDAwLFxuICAgICAgICBtaW46IDEwMDAwMCxcbiAgICAgICAgbWF4OiA4MDAwMDAwLFxuICAgICAgICBzdGVwOiAxMDAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNzbGlkZXJDcmVkaXRJbnB1dFVuY2VydGFpblwiKS52YWwoXG4gICAgICAgICAgICAgICAgXCLQltC10LvQsNC10LzQsNGPIGPRg9C80LzQsCDQutGA0LXQtNC40YLQsDogXCIgKyBkZWJ0VmFsdWUgKyBcIiDigr1cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAkKFwiI3NsaWRlckludmVzdFVuY2VydGFpblwiKS5zbGlkZXIoe1xuICAgICAgICByYW5nZTogXCJtaW5cIixcbiAgICAgICAgYW5pbWF0ZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiA2NDAwMDAwLFxuICAgICAgICBzdGVwOiAxMDAwMCxcbiAgICAgICAgc2xpZGU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkge1xuICAgICAgICAgICAgbGV0IGRlYnRWYWx1ZSA9IHVpLnZhbHVlO1xuICAgICAgICAgICAgZGVidFZhbHVlID0gbnVtYmVyV2l0aENvbW1hcyhkZWJ0VmFsdWUpO1xuICAgICAgICAgICAgJChcIiNzbGlkZXJJbnZlc3RJbnB1dFVuY2VydGFpblwiKS52YWwoXG4gICAgICAgICAgICAgICAgXCLQn9C10YDQstC+0L3QsNGH0LDQu9GM0L3Ri9C5INCy0LfQvdC+0YE6IFwiICsgZGVidFZhbHVlICsgXCIg4oK9XCJcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgfSk7XG59KTtcblxubGV0IGNyZWRpdElucHV0VW5jZXJ0YWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgXCJzbGlkZXJDcmVkaXRJbnB1dFVuY2VydGFpblwiXG4pO1xubGV0IHZhbHVlQ3JlZGl0SW5wdXRVbmNlcnRhaW4gPSBjcmVkaXRJbnB1dC52YWx1ZTtcbmNyZWRpdElucHV0VW5jZXJ0YWluLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcbiAgICBjcmVkaXRJbnB1dFVuY2VydGFpbi52YWx1ZSA9IFwiXCI7XG59KTtcblxuY3JlZGl0SW5wdXRVbmNlcnRhaW4uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsICgpID0+IHtcbiAgICBpZiAoIWNyZWRpdElucHV0VW5jZXJ0YWluLnZhbHVlKSB7XG4gICAgICAgIGNyZWRpdElucHV0VW5jZXJ0YWluLnZhbHVlID0gdmFsdWVDcmVkaXRJbnB1dFVuY2VydGFpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI3NsaWRlckNyZWRpdFVuY2VydGFpblwiKS5zbGlkZXIoXG4gICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiLFxuICAgICAgICAgICAgY3JlZGl0SW5wdXRVbmNlcnRhaW4udmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHVwZGF0ZWRDcmVkaXRJbnB1dCA9IG51bWJlcldpdGhDb21tYXMoY3JlZGl0SW5wdXRVbmNlcnRhaW4udmFsdWUpO1xuICAgICAgICBjcmVkaXRJbnB1dFVuY2VydGFpbi52YWx1ZSA9IGDQltC10LvQsNC10LzQsNGPINGB0YPQvNC80LAg0LrRgNC10LTQuNGC0LA6ICR7dXBkYXRlZENyZWRpdElucHV0fSDigr1gO1xuICAgIH1cbn0pO1xubGV0IGludmVzdElucHV0VW5jZXJ0YWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgXCJzbGlkZXJJbnZlc3RJbnB1dFVuY2VydGFpblwiXG4pO1xubGV0IHZhbHVlSW52ZXN0SW5wdXRVbmNlcnRhaW4gPSBpbnZlc3RJbnB1dC52YWx1ZTtcbmludmVzdElucHV0VW5jZXJ0YWluLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcbiAgICBpbnZlc3RJbnB1dFVuY2VydGFpbi52YWx1ZSA9IFwiXCI7XG59KTtcblxuaW52ZXN0SW5wdXRVbmNlcnRhaW4uYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsICgpID0+IHtcbiAgICBpZiAoIWludmVzdElucHV0VW5jZXJ0YWluLnZhbHVlKSB7XG4gICAgICAgIGludmVzdElucHV0VW5jZXJ0YWluLnZhbHVlID0gdmFsdWVJbnZlc3RJbnB1dFVuY2VydGFpbjtcbiAgICB9IGVsc2Uge1xuICAgICAgICAkKFwiI3NsaWRlckludmVzdFVuY2VydGFpblwiKS5zbGlkZXIoXG4gICAgICAgICAgICBcIm9wdGlvblwiLFxuICAgICAgICAgICAgXCJ2YWx1ZVwiLFxuICAgICAgICAgICAgaW52ZXN0SW5wdXRVbmNlcnRhaW4udmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHVwZGF0ZWRJbnZlc3RJbnB1dCA9IG51bWJlcldpdGhDb21tYXMoaW52ZXN0SW5wdXRVbmNlcnRhaW4udmFsdWUpO1xuICAgICAgICBpbnZlc3RJbnB1dFVuY2VydGFpbi52YWx1ZSA9IGDQn9C10YDQstC+0L3QsNGH0LDQu9GM0L3Ri9C5INCy0LfQvdC+0YE6ICR7dXBkYXRlZEludmVzdElucHV0fSDigr1gO1xuICAgIH1cbn0pO1xuXG5sZXQgcGlja2VyVG9nZ2xlclVuY2VydGFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheS0tdW5jZXJ0YWluXCIpO1xubGV0IHBpY2tlck9wdGlvbnNVbmNlcnRhaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgIFwiLmRpc3BsYXlfX29wdGlvbnMtLXVuY2VydGFpblwiXG4pO1xucGlja2VyVG9nZ2xlclVuY2VydGFpbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHBpY2tlck9wdGlvbnNVbmNlcnRhaW4uY2xhc3NMaXN0LnRvZ2dsZShcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG59KTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoIXBpY2tlclRvZ2dsZXJVbmNlcnRhaW4uY29udGFpbnMoZS50YXJnZXQpKSB7XG4gICAgICAgIHBpY2tlck9wdGlvbnNVbmNlcnRhaW4uY2xhc3NMaXN0LmFkZChcImpzLWhpZGRlbi0tQW5pbWF0ZWRcIik7XG4gICAgfVxufSk7XG5cbmxldCBvcHRpb25zVW5jZXJ0YWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5vcHRpb24tLXVuY2VydGFpblwiKTtcbm9wdGlvbnNVbmNlcnRhaW4uZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHVuY2hlY2tPcHRpb25zKCk7XG4gICAgICAgIG9wdGlvbi5jbGFzc0xpc3QuYWRkKFwiY2hlY2tlZFwiKTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaWNrZXJUaW1lVW5jZXJ0YWluXCIpLnRleHRDb250ZW50ID1cbiAgICAgICAgICAgIG9wdGlvbi50ZXh0Q29udGVudDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICBcInRpbWVQaWNrZXJVbmNlcnRhaW5cIlxuICAgICAgICApLnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHtvcHRpb24udGV4dENvbnRlbnR9YDtcbiAgICB9KTtcbn0pO1xuXG5sZXQgdGltZUlucHV0VW5jZXJ0YWluID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0aW1lUGlja2VyVW5jZXJ0YWluXCIpO1xubGV0IHZhbHVlVGltZUlucHV0VW5jZXJ0YWluID0gdGltZUlucHV0LnZhbHVlO1xudGltZUlucHV0VW5jZXJ0YWluLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c2luXCIsICgpID0+IHtcbiAgICB0aW1lSW5wdXRVbmNlcnRhaW4udmFsdWUgPSBcIlwiO1xufSk7XG5cbnRpbWVJbnB1dFVuY2VydGFpbi5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgKCkgPT4ge1xuICAgIGlmICghdGltZUlucHV0VW5jZXJ0YWluLnZhbHVlKSB7XG4gICAgICAgIHRpbWVJbnB1dFVuY2VydGFpbi52YWx1ZSA9IHZhbHVlVGltZUlucHV0VW5jZXJ0YWluO1xuICAgIH0gZWxzZSB7XG4gICAgICAgICQoXCIjc2xpZGVySW52ZXN0VW5jZXJ0YWluXCIpLnNsaWRlcihcbiAgICAgICAgICAgIFwib3B0aW9uXCIsXG4gICAgICAgICAgICBcInZhbHVlXCIsXG4gICAgICAgICAgICB0aW1lSW5wdXRVbmNlcnRhaW4udmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgbGV0IHVwZGF0ZWRUaW1lSW5wdXQgPSBudW1iZXJXaXRoQ29tbWFzKHRpbWVJbnB1dFVuY2VydGFpbi52YWx1ZSk7XG4gICAgICAgIHN3aXRjaCAodXBkYXRlZFRpbWVJbnB1dCkge1xuICAgICAgICAgICAgY2FzZSBcIjFcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXRVbmNlcnRhaW4udmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtGA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVVuY2VydGFpblwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtGA7XG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrT3B0aW9ucyh1cGRhdGVkVGltZUlucHV0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgICAgICAgICAgdGltZUlucHV0VW5jZXJ0YWluLnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHt1cGRhdGVkVGltZUlucHV0fSDQs9C+0LTQsGA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVVuY2VydGFpblwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtNCwYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjNcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXRVbmNlcnRhaW4udmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INCz0L7QtNCwYDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgICAgICAgICAgXCJwaWNrZXJUaW1lVW5jZXJ0YWluXCJcbiAgICAgICAgICAgICAgICApLnRleHRDb250ZW50ID0gYCR7dXBkYXRlZFRpbWVJbnB1dH0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgIGF1dG9DaGVja09wdGlvbnModXBkYXRlZFRpbWVJbnB1dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiNFwiOlxuICAgICAgICAgICAgICAgIHRpbWVJbnB1dFVuY2VydGFpbi52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7dXBkYXRlZFRpbWVJbnB1dH0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICBcInBpY2tlclRpbWVVbmNlcnRhaW5cIlxuICAgICAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgICR7dXBkYXRlZFRpbWVJbnB1dH0g0LPQvtC00LBgO1xuICAgICAgICAgICAgICAgIGF1dG9DaGVja09wdGlvbnModXBkYXRlZFRpbWVJbnB1dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiNVwiOlxuICAgICAgICAgICAgICAgIHRpbWVJbnB1dFVuY2VydGFpbi52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgICAgICAgICAgXCJwaWNrZXJUaW1lVW5jZXJ0YWluXCJcbiAgICAgICAgICAgICAgICApLnRleHRDb250ZW50ID0gYCR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcIjZcIjpcbiAgICAgICAgICAgICAgICB0aW1lSW5wdXRVbmNlcnRhaW4udmFsdWUgPSBg0KHRgNC+0Log0LrRgNC10LTQuNGC0L7QstCw0L3QuNGPOiAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICAgICAgICAgICAgICAgIFwicGlja2VyVGltZVVuY2VydGFpblwiXG4gICAgICAgICAgICAgICAgKS50ZXh0Q29udGVudCA9IGAke3VwZGF0ZWRUaW1lSW5wdXR9INC70LXRgmA7XG4gICAgICAgICAgICAgICAgYXV0b0NoZWNrT3B0aW9ucyh1cGRhdGVkVGltZUlucHV0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCI3XCI6XG4gICAgICAgICAgICAgICAgdGltZUlucHV0VW5jZXJ0YWluLnZhbHVlID0gYNCh0YDQvtC6INC60YDQtdC00LjRgtC+0LLQsNC90LjRjzogJHt1cGRhdGVkVGltZUlucHV0fSDQu9C10YJgO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgICAgICAgICAgICAgICBcInBpY2tlclRpbWVVbmNlcnRhaW5cIlxuICAgICAgICAgICAgICAgICkudGV4dENvbnRlbnQgPSBgJHt1cGRhdGVkVGltZUlucHV0fSDQu9C10YJgO1xuICAgICAgICAgICAgICAgIGF1dG9DaGVja09wdGlvbnModXBkYXRlZFRpbWVJbnB1dCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiOFwiOlxuICAgICAgICAgICAgICAgIHRpbWVJbnB1dFVuY2VydGFpbi52YWx1ZSA9IGDQodGA0L7QuiDQutGA0LXQtNC40YLQvtCy0LDQvdC40Y86ICR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICAgICAgICAgICAgICAgXCJwaWNrZXJUaW1lVW5jZXJ0YWluXCJcbiAgICAgICAgICAgICAgICApLnRleHRDb250ZW50ID0gYCR7dXBkYXRlZFRpbWVJbnB1dH0g0LvQtdGCYDtcbiAgICAgICAgICAgICAgICBhdXRvQ2hlY2tPcHRpb25zKHVwZGF0ZWRUaW1lSW5wdXQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufSk7Il19
